<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Salary Calculation</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#eef2f7;
}

.container{
  max-width:900px;
  margin:40px auto;
  background:#fff;
  padding:30px;
  border-radius:10px;
  box-shadow:0 0 15px rgba(0,0,0,0.1);
}

h2{
  text-align:center;
  color:#0b5394;
}

.box{
  background:#f7f9fc;
  padding:15px;
  margin:12px 0;
  border-radius:8px;
  font-size:16px;
}

.total{
  font-weight:bold;
  font-size:18px;
  color:#0b5394;
}

button{
  padding:12px 26px;
  font-size:17px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  margin-top:18px;
  background:#0b5394;
  color:#fff;
  width:100%;
}

button:hover{
  background:#073763;
}
</style>
</head>

<body>

<div class="container">

<h2>Salary Calculation</h2>

<div class="box">Basic Pay: ₹ <span id="basic"></span></div>
<div class="box">DA (50%): ₹ <span id="da"></span></div>
<div class="box">HRA: ₹ <span id="hra"></span></div>
<div class="box">Medical Allowance: ₹ 1000</div>

<div class="box total">Monthly Gross: ₹ <span id="monthlyGross"></span></div>
<div class="box total">Yearly Gross: ₹ <span id="yearlyGross"></span></div>

<hr>

<div class="box">Employee Contribution (NPS / EPF): ₹ <span id="deduction"></span></div>
<div class="box">GIS (₹30 × 12): ₹ 360</div>
<div class="box">Professional Tax: ₹ 1000</div>

<div class="box total">Total Deductions: ₹ <span id="totalDed"></span></div>

<button onclick="goNext()">Proceed to Form-16</button>

</div>

<script>

/* ===== FETCH DATA ===== */

const basic = Number(localStorage.getItem("t_basic") || 0);
const hraPercent = Number(localStorage.getItem("t_hra") || 0);
const type = localStorage.getItem("t_type") || "";

/* ===== CALCULATION ===== */

const da = Math.round(basic * 0.50);
const hra = Math.round(basic * hraPercent / 100);
const medical = 1000;

const monthlyGross = basic + da + hra + medical;
const yearlyGross = monthlyGross * 12;

/* ===== DEDUCTIONS ===== */

let employeeContribution = 0;

if(type === "Niyojit"){
  employeeContribution = 1800 * 12;   // EPF
}else{
  employeeContribution = Math.round((basic + da) * 0.10) * 12; // NPS
}

const gis = 360;
const profTax = 1000;

const totalDed = employeeContribution + gis + profTax;

/* ===== TAXABLE ===== */

const taxable = yearlyGross - totalDed - 50000; // Std deduction

/* ===== SIMPLE TAX (Old Regime approx) ===== */

let tax = 0;

if(taxable > 500000){
  tax = Math.round((taxable - 500000) * 0.20);
}else if(taxable > 250000){
  tax = Math.round((taxable - 250000) * 0.05);
}

/* ===== DISPLAY ===== */

function set(id,val){
  document.getElementById(id).innerText = val.toLocaleString();
}

set("basic", basic);
set("da", da);
set("hra", hra);
set("monthlyGross", monthlyGross);
set("yearlyGross", yearlyGross);
set("deduction", employeeContribution);
set("totalDed", totalDed);

/* ===== SAVE FOR FORM-16 ===== */

localStorage.setItem("f16_monthlyGross", monthlyGross);
localStorage.setItem("f16_yearlyGross", yearlyGross);
localStorage.setItem("f16_totalDed", totalDed);
localStorage.setItem("f16_taxable", taxable);
localStorage.setItem("f16_tax", tax);

/* ===== NEXT ===== */

function goNext(){
  location.href = "form16.html";
}

</script>

</body>
</html>
